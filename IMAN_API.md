# API تابع iman برای تنظیم مارکر روی نقشه

## تابع: `window.iman(latitude, longitude, addressId)`

این تابع مختصات و شناسه آدرس را از همکار شما دریافت می‌کند و مارکر را روی نقشه تنظیم می‌کند.

### نحوه استفاده:

```javascript
// همکار شما این تابع را فراخوانی می‌کند
window.iman(35.6892, 51.3890, 123);
```

### پارامترهای ورودی:

```javascript
iman(latitude, longitude, addressId)
```

- `latitude`: عرض جغرافیایی (number) - ضروری
- `longitude`: طول جغرافیایی (number) - ضروری  
- `addressId`: شناسه آدرس (number) - ضروری

### خروجی:
- `true`: در صورت موفقیت
- `false`: در صورت خطا یا اطلاعات ناقص

### مثال کامل:

```javascript
// همکار شما این تابع را فراخوانی می‌کند
window.iman(35.6892, 51.3890, 123);

// یا در تابع همکار:
function handleAddressEdit(addressData) {
    // فراخوانی تابع شما با مختصات و شناسه
    window.iman(addressData.latitude, addressData.longitude, addressData.id);
}
```

### کاری که تابع انجام می‌دهد:

1. **بررسی اطلاعات**: بررسی می‌کند که همه پارامترها وجود داشته باشند
2. **حذف مارکر قبلی**: اگر مارکر قبلی وجود داشته باشد، آن را حذف می‌کند
3. **ایجاد مارکر جدید**: مارکر جدید را در مختصات داده شده ایجاد می‌کند
4. **تنظیم مرکز نقشه**: نقشه را روی مختصات جدید تنظیم می‌کند
5. **نمایش پاپ‌آپ**: یک پاپ‌آپ با شناسه آدرس نمایش می‌دهد

### نکات مهم:

- تابع `window.map` باید از قبل تعریف شده باشد
- این کد برای کتابخانه Leaflet نوشته شده است
- تمام خطاها در کنسول مرورگر ثبت می‌شوند
- در صورت عدم وجود نقشه، پیام هشدار نمایش داده می‌شود 